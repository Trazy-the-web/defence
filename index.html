<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BI Group Cyber Cup</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            background-color: #f8f9fa;
        }
        .bracket {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            flex-wrap: wrap;
        }
        .round {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px;
            position: relative;
        }
        .round h4 {
            margin-bottom: 10px;
            font-size: 1.2rem;
            text-align: center;
        }
        .match {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid #ccc;
            padding: 10px;
            margin: 10px 0;
            background-color: white;
            font-weight: bold;
            min-width: 220px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        .winner {
            background-color: gold !important;
        }
        .score {
            margin-left: 10px;
            font-weight: bold;
            color: #555;
        }
        .champion {
            margin-top: 40px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
        }
        .champion .match {
            background-color: #28a745;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <ul class="nav nav-tabs" id="tournamentTabs">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" href="#groupStage" style="font-family: 'Courier New', sans-serif; font-size: 22px; color: black;">–ì—Ä—É–ø–ø–æ–≤–æ–π —ç—Ç–∞–ø</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#playoff" style="font-family: 'Courier New', sans-serif; font-size: 22px; color: black;">–ü–ª–µ–π-–æ—Ñ—Ñ</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#schedule" style="font-family: 'Courier New', sans-serif; font-size: 22px; color: black;">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#stats" style="font-family: 'Courier New', sans-serif; font-size: 22px; color: black;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#teams" style="font-family: 'Courier New', sans-serif; font-size: 22px; color: black;">–ö–æ–º–∞–Ω–¥—ã</a>
            </li>
        </ul>

        <div class="tab-content mt-3">
            <div class="tab-pane fade show active" id="groupStage">
                <h3>–¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞</h3>
                <table class="table table-bordered">
                    <thead>
                        <tr><th>–ö–æ–º–∞–Ω–¥–∞</th><th>–ú–∞—Ç—á–∏</th><th>–ü–æ–±–µ–¥—ã</th><th>–ü–æ—Ä–∞–∂–µ–Ω–∏—è</th><th>–û—á–∫–∏</th></tr>
                    </thead>
                    <tbody id="groupStageTable"></tbody>
                </table>
            </div>
            
            <div class="tab-pane fade" id="playoff">
                <h3>–¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Å–µ—Ç–∫–∞</h3>
                <div class="container mt-5">
                    <h2 class="text-center">–¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Å–µ—Ç–∫–∞</h2>
                    <div class="bracket" id="tournamentBracket">
                        <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Å–µ—Ç–∫–∞ -->
                    </div>
                    <div class="champion" id="championContainer">
                        <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—å -->
                    </div>
                </div>
            </div>
            
            <div class="tab-pane fade" id="schedule">
                <h3>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–∞—Ç—á–µ–π</h3>
                <table class="table table-bordered">
                    <thead>
                        <tr><th>–î–∞—Ç–∞</th><th>–í—Ä–µ–º—è</th><th>–ö–æ–º–∞–Ω–¥–∞ 1</th><th>–ö–æ–º–∞–Ω–¥–∞ 2</th><th>–°—á–µ—Ç</th></tr>
                    </thead>
                    <tbody id="scheduleTable"></tbody>
                </table>
            </div>
            
            <div class="tab-pane fade" id="stats">
                <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤</h3>
                <table class="table table-bordered">
                    <thead>
                        <tr><th>–ò–≥—Ä–æ–∫</th><th>–ö–æ–º–∞–Ω–¥–∞</th><th>–†–æ–ª—å</th><th>KDA</th></tr>
                    </thead>
                    <tbody id="statsTable"></tbody>
                </table>
            </div>
            
            <div class="tab-pane fade" id="teams">
                <h3>–°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥</h3>
                <div id="teamsList" class="row"></div>
            </div>
        </div>
    </div>

    <script>
        // –°–∫—Ä–∏–ø—Ç –¥–ª—è –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —ç—Ç–∞–ø–∞
        const groupSheetId = '12bJExUSCmVYkPB8zC4IFHeSky_GnYeof04j-h9JVcXQ';
        const groupApiKey = 'AIzaSyBMVx7zOAhtQwQqHzi5F-9QkyQmFOi1rBI';
        const groupRange = 'Sheet1!A2:E';

        fetch(`https://sheets.googleapis.com/v4/spreadsheets/${groupSheetId}/values/${groupRange}?key=${groupApiKey}`)
          .then(response => response.json())
          .then(data => {
              let rows = data.values;
              rows.forEach(row => {
                  $("#groupStageTable").append(`<tr><td>${row[0]}</td><td>${row[1]}</td><td>${row[2]}</td><td>${row[3]}</td><td>${row[4]}</td></tr>`);
              });
          });
    </script>

    <script>
        // –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç—É—Ä–Ω–∏—Ä–Ω–æ–π —Å–µ—Ç–∫–∏
        const playoffSheetId = '12bJExUSCmVYkPB8zC4IFHeSky_GnYeof04j-h9JVcXQ';
        const playoffApiKey = 'AIzaSyBMVx7zOAhtQwQqHzi5F-9QkyQmFOi1rBI';
        const playoffRange = 'Sheet2!A2:E';

        async function fetchMatches() {
            const url = `https://sheets.googleapis.com/v4/spreadsheets/${playoffSheetId}/values/${playoffRange}?key=${playoffApiKey}`;
            const response = await fetch(url);
            const data = await response.json();

            if (!data.values) {
                console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö!");
                return;
            }

            const matches = data.values;
            let rounds = {};
            let champion = null;

            matches.forEach(match => {
                const round = match[0];
                const team1 = match[1] || '???';
                const team2 = match[2] || '???';
                const winner = match[3] || '';
                const wins1 = match[4] ? match[4].split('-')[0] : '0';
                const wins2 = match[4] ? match[4].split('-')[1] : '0';

                if (round.toLowerCase() === '—Ñ–∏–Ω–∞–ª') {
                    champion = winner; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª—è —Ñ–∏–Ω–∞–ª–∞
                }

                if (!rounds[round]) {
                    rounds[round] = [];
                }

                rounds[round].push({ team1, team2, winner, wins1, wins2 });
            });

            let bracketHTML = "";
            Object.keys(rounds).forEach(round => {
                bracketHTML += `<div class="round"><h4>${round}</h4>`;
                
                rounds[round].forEach(match => {
                    let match1Class = match.team1 === match.winner ? 'match winner' : 'match';
                    let match2Class = match.team2 === match.winner ? 'match winner' : 'match';

                    bracketHTML += `    
                        <div class="${match1Class}">
                            ${match.team1} <span class="score">${match.wins1}</span>
                        </div>
                        <div class="${match2Class}">
                            ${match.team2} <span class="score">${match.wins2}</span>
                        </div>
                    `;
                });

                bracketHTML += `</div>`;
            });

            document.getElementById("tournamentBracket").innerHTML = bracketHTML;

            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
            if (champion) {
                document.getElementById("championContainer").innerHTML = `
                    <div class="match">üèÜ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: ${champion} üèÜ</div>
                `;
            }
        }

        fetchMatches();
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
</body>
</html>